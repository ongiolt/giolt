---
import darkLogo from "@/assets/giolt-dark.svg";
import lightLogo from "@/assets/giolt-light.svg";
import fallbackLogo from "@/assets/giolt-light.svg";
import { UserButton } from "@clerk/astro/components";
import { ReceiptTextIcon } from "lucide-react";
import { Badge } from "./ui/badge";
import { Button } from "./ui/button";

interface Props {
	buttons?: {
		label: string;
		href: string;
	}[];
	userButton?: boolean;
}

const { buttons } = Astro.props;
---

<div class="h-16"></div>

<nav class="fixed flex flex-row justify-between w-full items-center bg-background shadow h-16 z-50 py-2 px-4">
	<div class="flex flex-row items-center gap-2">
		<picture class="size-8">
			<source media="(prefers-color-scheme: dark)" srcset={darkLogo.src}>
			<source media="(prefers-color-scheme: light)" srcset={lightLogo.src}>
			<img src={fallbackLogo.src} alt="Giolt Logo">
		</picture>
		<Badge variant="secondary">Alpha</Badge>
	</div>
	<div class="flex flex-row items-center gap-2">
		{buttons?.map((b) => (
			<a
				href={b.href}
			>
				<Button variant="ghost">
					{b.label}
				</Button>
			</a>
		))}
		{Astro.props.userButton ? (
			<UserButton>
				<UserButton.MenuItems>
					<UserButton.Link
						label="Billing"
						href={`/portal?return_url=${Astro.request.url}`}
					>
						<ReceiptTextIcon slot="label-icon" className="size-4"/>
					</UserButton.Link>
				</UserButton.MenuItems>
			</UserButton>
		) : null}
	</div>
</nav>
