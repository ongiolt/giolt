---
import Home from "@/components/pages/home.astro";
import { db } from "@/lib/drizzle";
import { eq } from "drizzle-orm";
import { pages } from "giolt-db/schema.ts";

const { id } = Astro.params;

if (!id) {
	return new Response("Not Found", { status: 404 });
}

const page = await db.select().from(pages).where(eq(pages.id, id)).get();

if (!page || !page.public) {
	return new Response("Not Found", { status: 404 });
}
---

<Home
	{...page}
/>
